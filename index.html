<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Mega Rifa</title>
<link rel="manifest" href="manifest.json" />
<link rel="icon" type="image/jpeg" sizes="192x192" href="iphone.png" />
<link rel="apple-touch-icon" href="iphone.png" />
<meta name="theme-color" content="#00adb5" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="default" />
<style>
    /* üéØ Reset b√°sico */
    * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
    }

    body {
        font-family: 'Segoe UI', sans-serif;
        background: rgb(238, 238, 238);
        color: rgb(34, 40, 49);
        line-height: 1.6;
        box-shadow: inset 0 0 60px rgba(0, 173, 181, 0.2);
    }

    /* üß¢ Header */
    header {
        background: rgb(0, 173, 181);
        padding: 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
        border-bottom: rgb(34, 40, 49) solid 3px;
        border-radius: 0 0 10px 10px;
    }

    .header-content {
        display: flex;
        align-items: center;
        gap: 15px;
    }

    .logo img {
        height: 60px;
        border-radius: 10px;
    }

    .info-text h4 {
        font-size: 1.8em;
        color: rgb(34, 40, 49);
        margin-bottom: 5px;
    }

    .info-text p {
        font-size: 1em;
        color: rgb(34, 40, 49);
    }

    .header-content2 {
        display: flex;
        flex-direction: column;
        align-items: flex-end;
        justify-content: center;
        min-width: 200px;
        text-align: right;
    }

    .timer {
        font-size: 1.2em;
        font-weight: bold;
        color: rgb(34, 40, 49);
        margin-bottom: 5px;
    }

    .header-content2 p {
        font-size: 1em;
        color: rgb(34, 40, 49);
    }

    /* üß± Contenedor principal */
    .container {
        display: flex;
        flex-wrap: wrap;
        padding: 30px 20px;
        gap: 20px;
    }

    /* üì¢ Mensaje central */
    .mensaje-central {
        width: 100%;
        text-align: center;
        margin-bottom: 30px;
    }

    .mensaje-central h2 {
        font-size: 2em;
        margin-bottom: 10px;
        color: rgb(34, 40, 49);
    }

    .mensaje-central p {
        font-size: 1.05em;
        margin: 6px 0;
        color: rgb(34, 40, 49);
    }

    .resaltado {
        color: rgb(34, 40, 49);
        font-weight: bold;
    }

    .container{
        display: flex;
        justify-content: center;
    }

    /* üß© Columnas */
    .contenido-izquierdo,
    .contenido-derecho {
        flex: 1;
        padding: 20px;
        background: rgb(57, 62, 70);
        border-radius: 10px;
        box-shadow: 0 0 10px rgba(0,0,0);
        border: rgb(0, 173, 181) solid 3px;
    }

    .contenido-izquierdo {
        max-width: 350px;
        margin-right: 20px;
    }

    .contenido-derecho {
        max-width: 1000px;
        width: 100%;
        height: fit-content;
        display: flex;
        flex-direction: column;
        justify-content: center;
        box-sizing: border-box;
    }

    /* üñºÔ∏è Imagen del premio */
    .premio img {
        max-width: 100%;
        border-radius: 10px;
        margin-bottom: 15px;
    }

    /* üìÑ Descripci√≥n y m√©todos de pago */
    .descripcion,
    .metodopago {
        margin-bottom: 20px;
    }

    .descripcion h4,
    .metodopago h4 {
        margin-bottom: 5px;
        font-size: 1.1em;
        color: rgb(0, 173, 181);
    }

    .descripcion p,
    .metodopago p {
        color: rgb(238, 238, 238);
    }

    /* üî¢ Selector de n√∫meros */
    .selector-numeros h3 {
        margin-bottom: 10px;
        font-size: 1.2em;
        color: rgb(0, 173, 181);
        text-align: center;
    }

    .numeros-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(42px, 1fr)); /* ‚Üê M√°s ancho para 4 d√≠gitos */
        gap: 6px;
        max-height: 400px;
        overflow-y: auto;
        background: rgb(238, 238, 238);
        padding: 10px;
        border-radius: 10px;
        box-shadow: inset 0 0 5px rgba(0,0,0,0.05);
    }

    /* üîò N√∫meros */
    .numero {
        background: rgb(0, 173, 181);
        border-radius: 5px;
        text-align: center;
        padding: 6px 4px;
        cursor: pointer;
        font-weight: bold;
        font-size: 0.85em; /* ‚Üê Ajuste para 4 d√≠gitos */
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        transition: background 0.3s, transform 0.2s;
    }

    .numero:hover {
        background: rgb(238, 238, 238);
        transform: scale(1.05);
    }

    .numero.seleccionado {
        background: #00ff59;
        color: #000000;
    }

    .numero.vendido {
        background: #ff0000;
        color: #fff;
        cursor: not-allowed;
    }

    /* üõí Carrito */
    .carrito-compra {
        background: rgb(238, 238, 238);
        border: 3px solid rgb(0, 173, 181);
        padding: 15px;
        border-radius: 10px;
        box-shadow: 0 0 15px rgb(34, 40, 49);
        opacity: 0;
        transform: translateY(30px);
        transition: opacity 0.4s ease, transform 0.4s ease;
        pointer-events: none;
        margin-top: 20px;
    }

    .carrito-compra.mostrar {
        opacity: 1;
        transform: translateY(0);
        pointer-events: auto;
    }

    .total {
        font-size: 1.2em;
        font-weight: bold;
        color: rgb(34, 40, 49);
        margin-top: 10px;
    }

    /* üü† Bot√≥n */
    .boton-comprar {
        margin-top: 10px;
        padding: 10px 20px;
        background: rgb(0, 173, 181);
        color: rgb(34, 40, 49);
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-weight: bold;
        transition: background 0.3s;
    }

    .boton-comprar:hover {
        background: #009e3c;
    }

    /* ü™ü Modal */
    .modal {
        display: none;
        position: fixed;
        z-index: 999;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background: rgba(0,0,0,0.7);
        justify-content: center;
        align-items: center;
    }

    .modal-contenido {
        background: #fff;
        padding: 25px;
        border-radius: 10px;
        width: 90%;
        max-width: 400px;
        text-align: center;
        box-shadow: 0 0 20px rgba(0,0,0,0.2);
        animation: aparecer 0.4s ease;
        position: relative;
    }

    @keyframes aparecer {
        from { transform: scale(0.8); opacity: 0; }
        to { transform: scale(1); opacity: 1; }
    }

    .cerrar-modal {
        position: absolute;
        top: 10px;
        right: 15px;
        font-size: 24px;
        cursor: pointer;
        color: #888;
    }

    /* üì± Estilo responsivo */
    @media (max-width: 800px) {
        .container {
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }

        .contenido-izquierdo,
        .contenido-derecho {
            max-width: 100%;
            margin: 0 0 20px 0;
        }

        .numeros-grid {
            grid-template-columns: repeat(auto-fill, minmax(45px, 1fr)); /* ‚Üê Aumentado de 35px a 45px */
            max-height: 300px;
        }

        .numero {
            font-size: 0.9em; /* ‚Üê Ligero aumento para mejor legibilidad */
            padding: 6px 2px; /* ‚Üê Ajuste fino para mantener proporci√≥n */
        }

        .boton-comprar {
            width: 100%;
            text-align: center;
        }

        .carrito-compra {
            padding: 10px;
        }

        .modal-contenido {
            width: 95%;
            padding: 20px;
        }
    }

    @media (max-width: 600px) {
        header {
            flex-direction: column;
            align-items: center;
            text-align: center;
        }

        .header-content {
            flex-direction: column;
            align-items: center;
            margin-bottom: 15px;
        }

        .header-content2 {
            align-items: center;
            text-align: center;
        }

        .mensaje-central h2 {
            font-size: 1.5em;
        }

        .mensaje-central p {
            font-size: 1em;
        }

        .info-text h4 {
            font-size: 1.4em;
        }

        .info-text p,
        .header-content2 p,
        .descripcion p,
        .metodopago p {
            font-size: 0.95em;
        }

        .selector-numeros h3 {
            font-size: 1em;
        }

        .numero {
            padding: 6px;
            font-size: 0.9em;
        }

        .total {
            font-size: 1em;
        }

        .boton-comprar {
            font-size: 1em;
            padding: 8px 16px;
        }
    }

    /* üé° Ruleta circular mejorada */
    .ruleta-circular-container {
        margin-top: 30px;
        display: flex;
        justify-content: center;
        align-items: center;
    }

    .ruleta-circular {
        position: relative;
        width: 200px;
        height: 200px;
        border-radius: 50%;
        border: 5px solid rgb(0, 173, 181);
        animation: girarLento 12s linear infinite;
        background: radial-gradient(circle, rgb(238, 238, 238) 40%, rgb(0, 173, 181) 100%);
        box-shadow: 0 0 20px rgba(0,0,0,0.3);
    }

    .ruleta-item {
        position: absolute;
        width: 60px;
        height: 30px;
        background: rgb(0, 173, 181);
        color: #fff;
        font-weight: bold;
        text-align: center;
        line-height: 30px;
        border-radius: 5px;
        transform-origin: center;
        box-shadow: 0 0 5px rgba(0,0,0,0.2);
    }

    /* Posiciones circulares */
    .ruleta-item:nth-child(1) { top: 0; left: 50%; transform: translateX(-50%); }
    .ruleta-item:nth-child(2) { top: 25%; left: 100%; transform: translate(-100%, -50%); }
    .ruleta-item:nth-child(3) { top: 50%; left: 50%; transform: translate(-50%, -50%); }
    .ruleta-item:nth-child(4) { top: 75%; left: 0%; transform: translate(0%, -50%); }
    .ruleta-item:nth-child(5) { bottom: 0; left: 50%; transform: translateX(-50%); }

    @keyframes girarLento {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
    }

    /* üé≤ Bot√≥n aleatorio */
    .boton-aleatorio {
        margin: 10px auto 20px auto;
        display: block;
        padding: 10px 20px;
        background: #009e3c;
        color: #fff;
        border: none;
        border-radius: 5px;
        font-weight: bold;
        cursor: pointer;
        font-size: 1em;
        transition: background 0.3s;
        box-shadow: 0 0 10px rgba(0,0,0,0.2);
    }

    .boton-aleatorio:hover {
        background: #00c94d;
    }

    /* üìù Formulario dentro del modal */
    #formulario-compra {
        display: flex;
        flex-direction: column;
        gap: 10px;
        margin-top: 15px;
    }

    #formulario-compra input {
        padding: 10px;
        border-radius: 6px;
        border: 2px solid rgb(0, 173, 181);
        font-size: 1em;
        background: rgb(238, 238, 238);
        color: rgb(34, 40, 49);
        transition: border 0.3s;
    }

    #formulario-compra input:focus {
        outline: none;
        border-color: #009e3c;
    }

    #formulario-compra button {
        padding: 10px;
        background: rgb(0, 173, 181);
        color: rgb(34, 40, 49);
        border: none;
        border-radius: 6px;
        font-weight: bold;
        cursor: pointer;
        transition: background 0.3s;
    }

    #formulario-compra button:hover {
        background: #009e3c;
    }

    /* Responsive para formulario */
    @media (max-width: 600px) {
        #formulario-compra input {
            font-size: 0.95em;
            padding: 8px;
        }

        #formulario-compra button {
            font-size: 0.95em;
            padding: 8px;
        }
    }
</style>
</head>
<body>
    <header>
        <div class="header-content">
        <div class="logo">
            <img src="iphone.png" alt="Logo Mega Rifa" />
        </div>
        <div class="info-text">
            <h4>MEGA RIFA</h4>
            <p>¬°Compra con Pago M√≥vil, Zelle o Tarjeta!</p>
        </div>
        </div>
        <div class="header-content2">
        <p class="timer" id="countdown">Cargando tiempo...</p>
        <p>Premio: iPhone 15 Pro Max 256GB</p>
        </div>
    </header>

    <div class="container">
        <div class="mensaje-central">
            <h2>¬°Bienvenido a la Mega Rifa!</h2>
            <p>Participa y gana un incre√≠ble <strong>iPhone 15 Pro Max 256GB</strong>.</p>
            <p>Compra tu boleto ahora y no te pierdas la oportunidad de ganar.</p>
            <p><span class="resaltado">El sorteo se realizar√° en 40 minutos.</span></p>
        </div>

        <div class="contenido-izquierdo">
            <div class="premio">
                <img src="iphone.png" alt="Imagen del premio" />
                <div class="descripcion">
                    <h4>Descripci√≥n del Premio</h4>
                    <p>iPhone 15 Pro Max 256GB</p>
                    <p>¬°Un dispositivo de √∫ltima generaci√≥n con tecnolog√≠a avanzada!</p><br>
                    <h4>Valor</h4>
                    <p>0.50$ por n√∫mero</p>
                </div>
                <div class="metodopago">
                    <h4>M√©todos de Pago</h4>
                    <p>Pago M√≥vil</p>
                    <p>Banco de Venezuela</p>
                    <p>Tel√©fono: 0414-7996937</p>
                    <p>C√©dula: V-29582989</p>
                </div>
                <div id="carrito" class="carrito-compra">
                    <h4>üõí N√∫meros seleccionados</h4>
                    <p id="lista-seleccionados">Ninguno</p>
                    <p id="total-compra" class="total">$0.00</p>
                    <button id="btn-whatsapp" class="boton-comprar">Quiero comprar</button>
                </div>
            </div>
        </div>

        <div class="contenido-derecho">
            <div class="selector-numeros">
                <h3>Selecciona tus n√∫meros de la suerte (1‚Äì1000)</h3>
                <button id="btn-aleatorio" class="boton-aleatorio">üé≤ Elegir n√∫mero aleatorio</button>

                <div class="numeros-grid" id="numeros-grid"></div>
            </div>

            <div class="ruleta-circular-container">
                <div class="ruleta-circular" id="ruleta-circular">
                    <div class="ruleta-item">0001</div>
                    <div class="ruleta-item">0250</div>
                    <div class="ruleta-item">0500</div>
                    <div class="ruleta-item">0750</div>
                    <div class="ruleta-item">1000</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de confirmaci√≥n -->
    <div id="modal-compra" class="modal">
        <div class="modal-contenido">
            <span class="cerrar-modal">&times;</span>
            <h3>Confirmaci√≥n de compra</h3>
            <p id="modal-numeros">N√∫meros seleccionados: </p>
            <p id="modal-total">Total a pagar: </p>
            <form id="formulario-compra">
                <input type="text" id="nombre" placeholder="Nombre" required />
                <input type="text" id="apellido" placeholder="Apellido" required />
                <input type="email" id="correo" placeholder="Correo electr√≥nico" required />
                <input type="text" id="direccion" placeholder="Direcci√≥n" required />
                <input type="text" id="referencia" placeholder="N¬∞ de referencia Pago M√≥vil" required />
                <input type="tel" id="telefono" placeholder="Tel√©fono" required />
                <button type="submit" class="boton-comprar">‚úÖ Enviar por WhatsApp</button>
            </form>
        </div>
    </div>



<script>
    // ‚è± Temporizador
    const countdownElement = document.getElementById("countdown");
    const targetTime = new Date().getTime() + 40 * 60 * 1000;

    function updateCountdown() {
        const now = new Date().getTime();
        const distance = targetTime - now;

        if (distance < 0) {
        countdownElement.textContent = "¬°Sorteo en curso!";
        return;
        }

        const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((distance % (1000 * 60)) / 1000);
        countdownElement.textContent = `Tiempo restante: ${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
    }

    setInterval(updateCountdown, 1000);
    updateCountdown();

    // üî¢ Selector de n√∫meros
    const grid = document.getElementById("numeros-grid");
    const carrito = document.getElementById("carrito");
    const listaSeleccionados = document.getElementById("lista-seleccionados");
    const totalCompra = document.getElementById("total-compra");

    function actualizarCarrito() {
        const seleccionados = document.querySelectorAll(".numero.seleccionado");

        if (seleccionados.length > 0) {
        carrito.classList.remove("oculto");
        carrito.classList.add("mostrar");

        const numeros = Array.from(seleccionados).map(n => n.textContent);
        listaSeleccionados.textContent = numeros.join(", ");
        totalCompra.textContent = `$${(numeros.length * 0.50).toFixed(2)}`;
        } else {
        carrito.classList.remove("mostrar");
        carrito.classList.add("oculto");

        listaSeleccionados.textContent = "Ninguno";
        totalCompra.textContent = "$0.00";
        }
    }

    for (let i = 1; i <= 1000; i++) {
        const num = document.createElement("div");
        num.className = "numero";
        num.textContent = i.toString().padStart(4, '0');
        num.addEventListener("click", () => {
        if (!num.classList.contains("vendido")) {
            num.classList.toggle("seleccionado");
            actualizarCarrito();
        }
        });
        grid.appendChild(num);
    }

    // üí¨ Modal de confirmaci√≥n
    const modal = document.getElementById("modal-compra");
    const cerrarModal = document.querySelector(".cerrar-modal");
    const btnWhatsapp = document.getElementById("btn-whatsapp");
    const modalNumeros = document.getElementById("modal-numeros");
    const modalTotal = document.getElementById("modal-total");

    btnWhatsapp.addEventListener("click", () => {
        const seleccionados = document.querySelectorAll(".numero.seleccionado");
        if (seleccionados.length === 0) return;

        const numeros = Array.from(seleccionados).map(n => n.textContent);
        const total = numeros.length * 0.50;

        modalNumeros.textContent = `N√∫meros seleccionados: ${numeros.join(", ")}`;
        modalTotal.textContent = `Total a pagar: $${total.toFixed(2)}`;
        modal.style.display = "flex";
    });

    cerrarModal.addEventListener("click", () => {
        modal.style.display = "none";
    });

    // üì§ Env√≠o por WhatsApp con formulario
    document.getElementById("formulario-compra").addEventListener("submit", function(e) {
        e.preventDefault();

        const seleccionados = document.querySelectorAll(".numero.seleccionado");
        const numeros = Array.from(seleccionados).map(n => n.textContent);
        const total = numeros.length * 0.50;

        const nombre = document.getElementById("nombre").value.trim();
        const apellido = document.getElementById("apellido").value.trim();
        const correo = document.getElementById("correo").value.trim();
        const direccion = document.getElementById("direccion").value.trim();
        const referencia = document.getElementById("referencia").value.trim();
        const telefono = document.getElementById("telefono").value.trim();

        const mensaje = `¬°Hola! Quiero participar en la rifa del iPhone 15 Pro Max.\n\n` +
        `üßæ N√∫meros seleccionados: ${numeros.join(", ")}\n` +
        `üí∞ Total a pagar: $${total.toFixed(2)}\n\n` +
        `üë§ Nombre: ${nombre} ${apellido}\nüìß Correo: ${correo}\nüìç Direcci√≥n: ${direccion}\nüì± Tel√©fono: ${telefono}\nüî¢ Referencia Pago M√≥vil: ${referencia}`;

        const url = `https://wa.me/584147996937?text=${encodeURIComponent(mensaje)}`;
        window.open(url, "_blank");
        modal.style.display = "none";

        // ‚úÖ Marcar como vendidos
        seleccionados.forEach(n => {
        n.classList.remove("seleccionado");
        n.classList.add("vendido");
        });

        actualizarCarrito();
    });

    // üé° Ruleta circular din√°mica
    const ruletaItems = document.querySelectorAll(".ruleta-item");
    function actualizarRuletaBonita() {
        ruletaItems.forEach((item, i) => {
        const numero = Math.floor(Math.random() * 1000) + 1;
        item.textContent = numero.toString().padStart(4, '0');
        });
    }
    setInterval(actualizarRuletaBonita, 3000);

    // üé≤ Selecci√≥n aleatoria de n√∫mero disponible
    const btnAleatorio = document.getElementById("btn-aleatorio");
    btnAleatorio.addEventListener("click", () => {
        const disponibles = Array.from(document.querySelectorAll(".numero"))
        .filter(n => !n.classList.contains("vendido") && !n.classList.contains("seleccionado"));

        if (disponibles.length === 0) {
        alert("No hay n√∫meros disponibles.");
        return;
        }
        const aleatorio = disponibles[Math.floor(Math.random() * disponibles.length)];
        aleatorio.classList.add("seleccionado");
        actualizarCarrito();
    });

    // üõ†Ô∏è Service Worker
    if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('./service-worker.js')
        .then(reg => console.log('‚úÖ Service Worker registrado'))
        .catch(err => console.error('‚ùå Error al registrar SW:', err));
    }
</script>
</body>
</html>